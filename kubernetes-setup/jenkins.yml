  - name: Add helm repo for jenkins
    become: yes
    become_user: vagrant
    kubernetes.core.helm_repository:
        name: jenkins
        repo_url: "https://charts.jenkins.io"
  
  - name: Ensure the jenkins Namespace exists.
    become: yes
    become_user: vagrant
    kubernetes.core.k8s:
      api_version: v1
      kind: Namespace
      name: jenkins
      state: present
  - name: Install jenkins Chart
    become: yes
    become_user: vagrant
    kubernetes.core.helm:
       name: jenkins-server
       namespace: jenkins
       chart_ref: jenkins/jenkins     

